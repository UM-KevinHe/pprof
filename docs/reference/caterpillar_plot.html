<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Generate a caterpillar plot for standardized measures from different models using a provided CI dataframe."><title>Get a caterpillar plot to display confidence intervals for standardized measures — caterpillar_plot • pprof</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get a caterpillar plot to display confidence intervals for standardized measures — caterpillar_plot"><meta property="og:description" content="Generate a caterpillar plot for standardized measures from different models using a provided CI dataframe."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pprof</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/pprof.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-appendix">Appendix</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-appendix">
    <a class="dropdown-item" href="../articles/Logis-FE.html">Logis FE</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/UM-KevinHe/pprof/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Get a caterpillar plot to display confidence intervals for standardized measures</h1>
      <small class="dont-index">Source: <a href="https://github.com/UM-KevinHe/pprof/blob/HEAD/R/caterpillar_plot.R" class="external-link"><code>R/caterpillar_plot.R</code></a></small>
      <div class="d-none name"><code>caterpillar_plot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate a caterpillar plot for standardized measures from different models using a provided CI dataframe.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">caterpillar_plot</span><span class="op">(</span></span>
<span>  <span class="va">CI</span>,</span>
<span>  point_size <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  point_color <span class="op">=</span> <span class="st">"#475569"</span>,</span>
<span>  refline_value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  refline_color <span class="op">=</span> <span class="st">"#64748b"</span>,</span>
<span>  refline_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  refline_type <span class="op">=</span> <span class="st">"dashed"</span>,</span>
<span>  errorbar_width <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  errorbar_size <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  errorbar_alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  errorbar_color <span class="op">=</span> <span class="st">"#94a3b8"</span>,</span>
<span>  use_flag <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flag_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>, <span class="st">"#009E73"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>CI</dt>
<dd><p>a dataframe from <code>confint</code> function containing the standardized measure values, along with their confidence intervals lower and upper bounds.</p></dd>


<dt>point_size</dt>
<dd><p>size of the points in the caterpillar plot. The default value is 2.</p></dd>


<dt>point_color</dt>
<dd><p>color of the points in the plot. The default value is "#475569".</p></dd>


<dt>refline_value</dt>
<dd><p>value of the horizontal reference line, for which the standardized measures are compared. The default value is NULL.</p></dd>


<dt>refline_color</dt>
<dd><p>color of the reference line. The default value is "#64748b".</p></dd>


<dt>refline_size</dt>
<dd><p>size of the reference line. The default value is 1.</p></dd>


<dt>refline_type</dt>
<dd><p>line type for the reference line. The default value is "dashed".</p></dd>


<dt>errorbar_width</dt>
<dd><p>the width of the error bars (horizontal ends of the CI bars). The default value is 0.</p></dd>


<dt>errorbar_size</dt>
<dd><p>the thickness of the error bars. The default value is 0.5.</p></dd>


<dt>errorbar_alpha</dt>
<dd><p>transparency level for the error bars. A value between 0 and 1, where 0 is completely transparent and 1 is fully opaque. The default value is 0.5.</p></dd>


<dt>errorbar_color</dt>
<dd><p>color of the error bars. The default value is "#94a3b8".</p></dd>


<dt>use_flag</dt>
<dd><p>logical; if <code>TRUE</code>, the error bars are colored to show providers' flags based on their performance. The default is <code>FALSE</code>.</p></dd>


<dt>flag_color</dt>
<dd><p>vector of colors used for flagging providers when <code>use_flag = TRUE</code>. The default value is <code>c("#E69F00", "#56B4E9", "#009E73")</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A ggplot object which is a caterpillar plot for the standardized measures.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function creates a caterpillar plot to visualize the standardized measures (indirect or direct).
The input <code>CI</code> must be a dataframe output from package <code>pprof</code>'s <code>confint</code> function.
Each provider's standardized measure value is represented as a point, and a reference line is shown at the value specified by <code>refline_value</code> (default is NULL).
If <code>refline_value</code> is not specified, for linear FE or RE models with indirect or direct standardized differences, it will be set to 0;
for logistic FE models with indirect or direct ratios, it will be set to 1;
and for logistic FE with indirect or direct rates, it will be set to the population rate, which represents the average rate across all observations.</p>
<p>Confidence intervals (CI) are displayed as error bars: for <code>alternative = "two.sided"</code>, two-sided confidence intervals are shown;
for <code>alternative = "greater"</code>, error bars extend from the lower bound to the standardized measure values;
and for <code>alternative = "less"</code>, they extend from the standardized measure values to the upper bound.
For cases where one side of the confidence interval is infinite, that side only extends to the standardized measure.
For example, in a logistic fixed effect model, if a provider has all 0s or all 1s, one side of the confidence interval will be infinite.</p>
<p>When <code>use_flag = TRUE</code>, the plot will use colors specified by <code>flag_color</code> to show the flags of providers.
Each error bar will be colored to reflect the flag, making it easy to identify providers with different performance levels.
When <code>use_flag = FALSE</code>, all error bars will have the same color, specified by <code>errorbar_color</code>.
This provides a simpler visualization without flagging individual providers.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="confint.linear_fe.html">confint.linear_fe</a></code>, <code><a href="confint.linear_re.html">confint.linear_re</a></code>, <code><a href="confint.logis_fe.html">confint.logis_fe</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ExampleDataLinear</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">outcome</span> <span class="op">&lt;-</span> <span class="va">ExampleDataLinear</span><span class="op">$</span><span class="va">Y</span></span></span>
<span class="r-in"><span><span class="va">covar</span> <span class="op">&lt;-</span> <span class="va">ExampleDataLinear</span><span class="op">$</span><span class="va">Z</span></span></span>
<span class="r-in"><span><span class="va">ID</span> <span class="op">&lt;-</span> <span class="va">ExampleDataLinear</span><span class="op">$</span><span class="va">ID</span></span></span>
<span class="r-in"><span><span class="va">fit_linear</span> <span class="op">&lt;-</span> <span class="fu"><a href="linear_fe.html">linear_fe</a></span><span class="op">(</span>Y <span class="op">=</span> <span class="va">outcome</span>, Z <span class="op">=</span> <span class="va">covar</span>, ID <span class="op">=</span> <span class="va">ID</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Input format: Y, Z, and ID.</span>
<span class="r-in"><span><span class="va">CI_linear</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/confint.html" class="external-link">confint</a></span><span class="op">(</span><span class="va">fit_linear</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">caterpillar_plot</span><span class="op">(</span><span class="va">CI_linear</span><span class="op">$</span><span class="va">CI.indirect</span>, use_flag <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                 errorbar_width <span class="op">=</span> <span class="fl">0.5</span>, errorbar_size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="caterpillar_plot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ExampleDataBinary</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit_logis</span> <span class="op">&lt;-</span> <span class="fu"><a href="logis_fe.html">logis_fe</a></span><span class="op">(</span>Y <span class="op">=</span> <span class="va">ExampleDataBinary</span><span class="op">$</span><span class="va">Y</span>,</span></span>
<span class="r-in"><span>                      Z <span class="op">=</span> <span class="va">ExampleDataBinary</span><span class="op">$</span><span class="va">Z</span>,</span></span>
<span class="r-in"><span>                      ID <span class="op">=</span> <span class="va">ExampleDataBinary</span><span class="op">$</span><span class="va">ID</span>, message <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">CI_logis</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/confint.html" class="external-link">confint</a></span><span class="op">(</span><span class="va">fit_logis</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">caterpillar_plot</span><span class="op">(</span><span class="va">CI_logis</span><span class="op">$</span><span class="va">CI.indirect_ratio</span>, use_flag <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                 errorbar_width <span class="op">=</span> <span class="fl">0.5</span>, errorbar_size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="caterpillar_plot-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Xiaohan Liu, Lingfeng Luo, Yubo Shao, Xiangeng Fang, Wenbo Wu, Kevin He.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

